{"ast":null,"code":"import _regenerator from \"/Users/lingl/Desktop/java_proj/movie_night/MovieNight/frontend/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"/Users/lingl/Desktop/java_proj/movie_night/MovieNight/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"/Users/lingl/Desktop/java_proj/movie_night/MovieNight/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport { searchByTags } from '@/services/api';\nimport { mapActions } from \"vuex\";\nexport default {\n  data: function data() {\n    return {\n      tags: ['剧情', '喜剧', '冒险', '动画', '奇幻', '爱情', '动作', '科幻', '家庭', '犯罪', '战争', '悬疑', '历史', '惊悚', '古装', '传记', '歌舞', '纪录片', '音乐', '短片', '西部', '灾难', '武侠', '运动', '同性', '恐怖', '儿童', '情色'],\n      languages: ['英语', '汉语普通话', '日语', '法语', '西班牙语', '德语', '粤语', '俄语', '意大利语', '韩语', '印地语', '阿拉伯语', '泰语', '拉丁语', '上海话', '瑞典语', '葡萄牙语', '波斯语', '辛达林语', '重庆话', '美国手语', '丹麦语', '荷兰语', '中国手语', '土耳其语', '四川话', '山西话', '沪语', '挪威语', '唐山话', '手语', '克罗地亚语', '科萨语', '潮州话', '武汉话', '毛利语', '芬兰语', '匈牙利语', '闽南语', '爱尔兰语', '苏格兰盖尔语', '多斯拉克语', '柏柏尔语', '日本手语', '意第绪语', '希腊语', '冰岛语', '晋语', '南非荷兰语', '湖北话', '湖南话', '蒙古语', '捷克语', '爱沙尼亚语', '越南语', '武汉方言', '四川方言', '波尼语', '南京话', '昆雅语', '古英语', '古代英语', '泰米尔语', '因纽特语', '塞尔维亚语', '斯瓦希里语', '祖鲁语', '山东方言', '夏威夷语', '乌尔都语', '乌克兰语', '索马里语', '贵州方言', '印尼语', '阿姆哈拉语'],\n      selectedTags: [],\n      selectedLanguages: []\n    };\n  },\n  methods: _objectSpread(_objectSpread({\n    toggleTag: function toggleTag(tag) {\n      var index = this.selectedTags.indexOf(tag);\n      if (index > -1) {\n        this.selectedTags.splice(index, 1);\n      } else {\n        this.selectedTags.push(tag);\n      }\n    },\n    toggleLanguage: function toggleLanguage(language) {\n      var index = this.selectedLanguages.indexOf(language);\n      if (index > -1) {\n        this.selectedLanguages.splice(index, 1);\n      } else {\n        this.selectedLanguages.push(language);\n      }\n    }\n  }, mapActions(['updateMovies'])), {}, {\n    searchByTagsAndLanguages: function searchByTagsAndLanguages() {\n      var _this = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        var response, movies, _t;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.n) {\n            case 0:\n              if (!(_this.selectedTags.length === 0 && _this.selectedLanguages.length === 0)) {\n                _context.n = 1;\n                break;\n              }\n              alert('至少要选择一个标签噢');\n              return _context.a(2);\n            case 1:\n              _context.p = 1;\n              _context.n = 2;\n              return searchByTags(_this.selectedTags, _this.selectedLanguages);\n            case 2:\n              response = _context.v;\n              movies = response.data.data;\n              _this.updateMovies(movies);\n              _this.$router.push({\n                name: 'SearchResults'\n              });\n              _context.n = 4;\n              break;\n            case 3:\n              _context.p = 3;\n              _t = _context.v;\n              console.error(_t);\n            case 4:\n              return _context.a(2);\n          }\n        }, _callee, null, [[1, 3]]);\n      }))();\n    }\n  })\n};","map":{"version":3,"names":["searchByTags","mapActions","data","tags","languages","selectedTags","selectedLanguages","methods","_objectSpread","toggleTag","tag","index","indexOf","splice","push","toggleLanguage","language","searchByTagsAndLanguages","_this","_asyncToGenerator","_regenerator","m","_callee","response","movies","_t","w","_context","n","length","alert","a","p","v","updateMovies","$router","name","console","error"],"sources":["/Users/lingl/Desktop/java_proj/movie_night/MovieNight/frontend/src/views/TagsSearchView.vue"],"sourcesContent":["<template>\r\n  <div class=\"tags-search-container\">\r\n    <div class=\"tags-search-card\">\r\n      <h2 class=\"header-title\">选择分类或语言</h2>\r\n      <div class=\"selection-section\">\r\n        <div class=\"category-container\">\r\n          <h3 class=\"section-title\">\r\n            <span class=\"icon\">🏷️</span>\r\n            分类标签\r\n          </h3>\r\n          <div class=\"tags-grid\">\r\n            <button\r\n                v-for=\"tag in tags\"\r\n                :key=\"tag\"\r\n                @click=\"toggleTag(tag)\"\r\n                :class=\"{ selected: selectedTags.includes(tag) }\"\r\n                class=\"tag-button\"\r\n            >\r\n              {{ tag }}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"divider\"></div>\r\n\r\n        <div class=\"language-container\">\r\n          <h3 class=\"section-title\">\r\n            <span class=\"icon\">🌐</span>\r\n            语言选择\r\n          </h3>\r\n          <div class=\"tags-grid\">\r\n            <button\r\n                v-for=\"language in languages\"\r\n                :key=\"language\"\r\n                @click=\"toggleLanguage(language)\"\r\n                :class=\"{ selected: selectedLanguages.includes(language) }\"\r\n                class=\"tag-button\"\r\n            >\r\n              {{ language }}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"action-container\">\r\n        <p class=\"selection-info\">\r\n          已选择:\r\n          <span v-if=\"selectedTags.length > 0\">{{ selectedTags.join(', ') }}</span>\r\n          <span v-else>未选择分类</span>\r\n          <span v-if=\"selectedLanguages.length > 0\"> | {{ selectedLanguages.join(', ') }}</span>\r\n        </p>\r\n        <button\r\n            @click=\"searchByTagsAndLanguages\"\r\n            class=\"search-button\"\r\n            :disabled=\"selectedTags.length === 0 && selectedLanguages.length === 0\"\r\n        >\r\n          开始搜索\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { searchByTags } from '@/services/api';\r\nimport {mapActions} from \"vuex\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      tags: ['剧情', '喜剧', '冒险', '动画', '奇幻', '爱情', '动作', '科幻', '家庭', '犯罪', '战争', '悬疑', '历史', '惊悚', '古装',\r\n        '传记', '歌舞', '纪录片', '音乐', '短片', '西部', '灾难', '武侠', '运动', '同性', '恐怖', '儿童', '情色'],\r\n      languages: ['英语', '汉语普通话', '日语', '法语', '西班牙语', '德语', '粤语', '俄语', '意大利语', '韩语', '印地语', '阿拉伯语',\r\n        '泰语', '拉丁语', '上海话', '瑞典语', '葡萄牙语', '波斯语', '辛达林语', '重庆话', '美国手语', '丹麦语', '荷兰语', '中国手语',\r\n        '土耳其语', '四川话', '山西话', '沪语', '挪威语', '唐山话', '手语', '克罗地亚语', '科萨语', '潮州话', '武汉话', '毛利语',\r\n        '芬兰语', '匈牙利语', '闽南语', '爱尔兰语', '苏格兰盖尔语', '多斯拉克语', '柏柏尔语', '日本手语', '意第绪语', '希腊语', '冰岛语',\r\n        '晋语', '南非荷兰语', '湖北话', '湖南话', '蒙古语', '捷克语', '爱沙尼亚语', '越南语', '武汉方言', '四川方言', '波尼语', '南京话',\r\n        '昆雅语', '古英语', '古代英语', '泰米尔语', '因纽特语', '塞尔维亚语', '斯瓦希里语', '祖鲁语', '山东方言', '夏威夷语', '乌尔都语',\r\n        '乌克兰语', '索马里语', '贵州方言', '印尼语', '阿姆哈拉语'],\r\n      selectedTags: [],\r\n      selectedLanguages: []\r\n    }\r\n  },\r\n  methods: {\r\n    toggleTag(tag) {\r\n      const index = this.selectedTags.indexOf(tag);\r\n      if (index > -1) {\r\n        this.selectedTags.splice(index, 1);\r\n      } else {\r\n        this.selectedTags.push(tag);\r\n      }\r\n    },\r\n    toggleLanguage(language) {\r\n      const index = this.selectedLanguages.indexOf(language);\r\n      if (index > -1) {\r\n        this.selectedLanguages.splice(index, 1);\r\n      } else {\r\n        this.selectedLanguages.push(language);\r\n      }\r\n    },\r\n    ...mapActions(['updateMovies']),\r\n    async searchByTagsAndLanguages() {\r\n      if (this.selectedTags.length === 0 && this.selectedLanguages.length === 0) {\r\n        alert('至少要选择一个标签噢');\r\n        return;\r\n      }\r\n      try {\r\n        const response = await searchByTags(this.selectedTags, this.selectedLanguages);\r\n        const movies = response.data.data;\r\n        this.updateMovies(movies);\r\n        this.$router.push({ name: 'SearchResults'});\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.tags-search-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 100vh;\r\n  background-color: #f9f5f5;\r\n  padding: 20px;\r\n}\r\n\r\n.tags-search-card {\r\n  width: 90%;\r\n  max-width: 1000px;\r\n  background-color: white;\r\n  border-radius: 15px;\r\n  box-shadow: 0 10px 30px rgba(183, 146, 146, 0.2);\r\n  padding: 30px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.tags-search-card:hover {\r\n  box-shadow: 0 15px 40px;\r\n}\r\n\r\n.header-title {\r\n  text-align: center;\r\n  color: #b06767;\r\n  font-size: 32px;\r\n  margin-bottom: 30px;\r\n  padding-bottom: 15px;\r\n  border-bottom: 2px dashed #e0e0e0;\r\n}\r\n\r\n.selection-section {\r\n  display: flex;\r\n  gap: 30px;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.category-container, .language-container {\r\n  flex: 1;\r\n}\r\n\r\n.section-title {\r\n  color: #b06767;\r\n  font-size: 22px;\r\n  margin-bottom: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.icon {\r\n  font-size: 24px;\r\n}\r\n\r\n.tags-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\r\n  gap: 12px;\r\n  max-height: 400px;\r\n  overflow-y: auto;\r\n  padding: 10px;\r\n  border-radius: 10px;\r\n  background-color: #fcf9f9;\r\n  border: 1px solid #f0e6e6;\r\n}\r\n\r\n.tag-button {\r\n  padding: 10px 15px;\r\n  font-size: 14px;\r\n  border: 1px solid #e0d0d0;\r\n  border-radius: 25px;\r\n  cursor: pointer;\r\n  background-color: white;\r\n  color: #555;\r\n  transition: all 0.2s ease;\r\n  text-align: center;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.tag-button:hover {\r\n  background-color: #fdf5f5;\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 3px 8px rgba(183, 146, 146, 0.2);\r\n}\r\n\r\n.tag-button.selected {\r\n  background-color: #b06767;\r\n  color: white;\r\n  border-color: #b06767;\r\n  font-weight: 600;\r\n}\r\n\r\n.divider {\r\n  width: 1px;\r\n  background-color: #f0e0e0;\r\n  margin: 0 10px;\r\n}\r\n\r\n.action-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin-top: 20px;\r\n  padding-top: 20px;\r\n  border-top: 1px dashed #e0e0e0;\r\n}\r\n\r\n.selection-info {\r\n  font-size: 16px;\r\n  color: #666;\r\n  margin-bottom: 20px;\r\n  padding: 12px 20px;\r\n  background-color: #fcf5f5;\r\n  border-radius: 8px;\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\n\r\n.selection-info span {\r\n  color: #b06767;\r\n  font-weight: 500;\r\n}\r\n\r\n.search-button {\r\n  padding: 15px 40px;\r\n  font-size: 18px;\r\n  background: linear-gradient(135deg, #b79292, #b06767);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 30px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  font-weight: 600;\r\n  letter-spacing: 1px;\r\n  box-shadow: 0 5px 15px rgba(176, 103, 103, 0.3);\r\n  margin-top: 10px;\r\n}\r\n\r\n.search-button:hover:not(:disabled) {\r\n  transform: translateY(-3px);\r\n  box-shadow: 0 8px 20px rgba(176, 103, 103, 0.4);\r\n  background: linear-gradient(135deg, #b06767, #883333);\r\n}\r\n\r\n.search-button:disabled {\r\n  background: linear-gradient(135deg, #cccccc, #aaaaaa);\r\n  cursor: not-allowed;\r\n  opacity: 0.7;\r\n}\r\n\r\n/* 滚动条样式 */\r\n.tags-grid::-webkit-scrollbar {\r\n  width: 8px;\r\n}\r\n\r\n.tags-grid::-webkit-scrollbar-track {\r\n  background: #f9f0f0;\r\n  border-radius: 4px;\r\n}\r\n\r\n.tags-grid::-webkit-scrollbar-thumb {\r\n  background-color: #d9c2c2;\r\n  border-radius: 4px;\r\n}\r\n\r\n.tags-grid::-webkit-scrollbar-thumb:hover {\r\n  background-color: #b06767;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .selection-section {\r\n    flex-direction: column;\r\n    gap: 20px;\r\n  }\r\n\r\n  .divider {\r\n    width: 100%;\r\n    height: 1px;\r\n    margin: 10px 0;\r\n  }\r\n\r\n  .tags-grid {\r\n    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));\r\n  }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}