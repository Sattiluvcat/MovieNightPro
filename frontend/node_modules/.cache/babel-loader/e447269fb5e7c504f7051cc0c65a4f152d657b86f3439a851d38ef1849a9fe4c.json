{"ast":null,"code":"import _regenerator from \"/Users/lingl/Desktop/java_proj/movie_night/MovieNight/frontend/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"/Users/lingl/Desktop/java_proj/movie_night/MovieNight/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { getMovieDetail, watchTogether as _watchTogether, sendComment as _sendComment } from '@/services/api'; // Adjust the path as necessary\n\nexport default {\n  props: ['_id'],\n  data: function data() {\n    return {\n      movie: null,\n      cover_url: '',\n      score_official: '',\n      summary: '',\n      comment: '',\n      userRating: 0\n    };\n  },\n  created: function created() {\n    var _this = this;\n    return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n      var response, _t;\n      return _regenerator().w(function (_context) {\n        while (1) switch (_context.n) {\n          case 0:\n            _context.p = 0;\n            _context.n = 1;\n            return getMovieDetail(_this._id);\n          case 1:\n            response = _context.v;\n            console.log(\"fetch movie detail 响应:\", response);\n            if (response && response.data) {\n              _this.movie = response.data.data.movie;\n              _this.cover_url = response.data.data.cover_url;\n              _this.score_official = response.data.data.score_official;\n              _this.summary = response.data.data.summary;\n            }\n            _context.n = 3;\n            break;\n          case 2:\n            _context.p = 2;\n            _t = _context.v;\n            console.error('抓取电影内容时出错了:', _t);\n          case 3:\n            return _context.a(2);\n        }\n      }, _callee, null, [[0, 2]]);\n    }))();\n  },\n  methods: {\n    watchTogether: function watchTogether() {\n      var _this2 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {\n        var response, _t2;\n        return _regenerator().w(function (_context2) {\n          while (1) switch (_context2.n) {\n            case 0:\n              _context2.p = 0;\n              _context2.n = 1;\n              return _watchTogether(_this2._id);\n            case 1:\n              response = _context2.v;\n              console.log('一起看 响应:', response);\n              if (response.data.code === 0) alert('请登录后再发送噢');else alert('已向Satti发送一起看邀请');\n              _context2.n = 3;\n              break;\n            case 2:\n              _context2.p = 2;\n              _t2 = _context2.v;\n              console.error('一起看功能出错了:', _t2);\n            case 3:\n              return _context2.a(2);\n          }\n        }, _callee2, null, [[0, 2]]);\n      }))();\n    },\n    sendComment: function sendComment() {\n      var _this3 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3() {\n        var response, _t3;\n        return _regenerator().w(function (_context3) {\n          while (1) switch (_context3.n) {\n            case 0:\n              _context3.p = 0;\n              _context3.n = 1;\n              return _sendComment(_this3._id, _this3.comment);\n            case 1:\n              response = _context3.v;\n              console.log('发送评论 响应:', response);\n              if (response.data.code === '0') alert('请登录后再发送噢');else alert('已向Satti发送电影评论');\n              _this3.comment = ''; // Clear the input after sending the comment\n              _context3.n = 3;\n              break;\n            case 2:\n              _context3.p = 2;\n              _t3 = _context3.v;\n              console.error('发送评论功能出错了:', _t3);\n            case 3:\n              return _context3.a(2);\n          }\n        }, _callee3, null, [[0, 2]]);\n      }))();\n    },\n    handleKeydown: function handleKeydown(event) {\n      if (event.key === 'Enter') {\n        this.sendComment();\n      }\n    },\n    setUserRating: function setUserRating(rating) {\n      this.userRating = rating;\n      // TODO 后端联调\n    }\n  }\n};","map":{"version":3,"names":["getMovieDetail","watchTogether","sendComment","props","data","movie","cover_url","score_official","summary","comment","userRating","created","_this","_asyncToGenerator","_regenerator","m","_callee","response","_t","w","_context","n","p","_id","v","console","log","error","a","methods","_this2","_callee2","_t2","_context2","code","alert","_this3","_callee3","_t3","_context3","handleKeydown","event","key","setUserRating","rating"],"sources":["/Users/lingl/Desktop/java_proj/movie_night/MovieNight/frontend/src/views/MovieDetailView.vue"],"sourcesContent":["<template>\r\n  <div class=\"movie-detail-container\">\r\n    <div class=\"beautify-element\">\r\n      <hr class=\"beautify-line\" />\r\n      <p class=\"beautify-text\">Welcome to the Movie Detail Page!🤩</p>\r\n      <hr class=\"beautify-line\" />\r\n    </div>\r\n    <div v-if=\"movie\" class=\"movie-detail\">\r\n      <div class=\"top-section\">\r\n        <div class=\"left-column\">\r\n          <img referrerpolicy=\"no-referrer\" :src=\"cover_url\" alt=\"Movie Cover\" class=\"movie-cover\" />\r\n        </div>\r\n        <div class=\"middle-column\">\r\n          <h1 class=\"movie-title\">{{ movie.title }}</h1>\r\n          <p class=\"movie-director\">{{ movie.director }}</p>\r\n          <p class=\"movie-duration\">{{ movie.duration }}</p>\r\n          <p class=\"movie-actors\">{{ movie.actor_actresses.join(', ') }}</p>\r\n        </div>\r\n        <div class=\"right-column\">\r\n          <p class=\"movie-score-official\">豆瓣评分: {{ score_official }}</p>\r\n          <p class=\"movie-score-mine\">我的评分: {{ movie.star_mine }} / 10</p>\r\n          <div class=\"user-rating\">\r\n            <span>用户评分: </span>\r\n              <star-rating :rating=\"userRating\" @rating-selected=\"setUserRating\"></star-rating>\r\n          </div>\r\n          <button @click=\"watchTogether\" class=\"watch-together-button\">一起看</button>\r\n        </div>\r\n      </div>\r\n      <div class=\"bottom-section\">\r\n        <p class=\"movie-tags\">{{ movie.tags.join(', ') }}</p>\r\n        <p class=\"movie-languages\">{{ movie.languages.join(', ') }}</p>\r\n        <p class=\"movie-summary preserve-whitespace\">{{ summary }}</p>\r\n        <div class=\"comment-section\">\r\n          <input v-model=\"comment\" @keydown=\"handleKeydown\" placeholder=\"看过了？请跟Satti分享评论😸（按下Enter就会发送噢）\" class=\"comment-input\" />\r\n          <button @click=\"sendComment\" class=\"send-comment-button\">发送评论</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div v-else>\r\n      加载中 请稍候😣\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getMovieDetail, watchTogether, sendComment } from '@/services/api'; // Adjust the path as necessary\r\n\r\nexport default {\r\n  props: ['_id'],\r\n  data() {\r\n    return {\r\n      movie: null,\r\n      cover_url: '',\r\n      score_official: '',\r\n      summary: '',\r\n      comment: '',\r\n      userRating: 0\r\n    }\r\n  },\r\n  async created() {\r\n    try {\r\n      const response = await getMovieDetail(this._id);\r\n      console.log(\"fetch movie detail 响应:\", response);\r\n      if (response && response.data) {\r\n        this.movie = response.data.data.movie;\r\n        this.cover_url = response.data.data.cover_url;\r\n        this.score_official = response.data.data.score_official;\r\n        this.summary = response.data.data.summary;\r\n      }\r\n    } catch (error) {\r\n      console.error('抓取电影内容时出错了:', error);\r\n    }\r\n  },\r\n  methods: {\r\n    async watchTogether() {\r\n      try {\r\n        const response = await watchTogether(this._id);\r\n        console.log('一起看 响应:', response);\r\n        if (response.data.code === 0)\r\n          alert('请登录后再发送噢');\r\n        else\r\n          alert('已向Satti发送一起看邀请');\r\n      } catch (error) {\r\n        console.error('一起看功能出错了:', error);\r\n      }\r\n    },\r\n    async sendComment() {\r\n      try {\r\n        const response = await sendComment(this._id, this.comment);\r\n        console.log('发送评论 响应:', response);\r\n        if (response.data.code === '0')\r\n          alert('请登录后再发送噢');\r\n        else\r\n          alert('已向Satti发送电影评论');\r\n        this.comment = ''; // Clear the input after sending the comment\r\n      } catch (error) {\r\n        console.error('发送评论功能出错了:', error);\r\n      }\r\n    },\r\n    handleKeydown(event) {\r\n      if (event.key === 'Enter') {\r\n        this.sendComment();\r\n      }\r\n    },\r\n    setUserRating(rating) {\r\n      this.userRating = rating;\r\n      // TODO 后端联调\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.preserve-whitespace {\r\n  white-space: pre-wrap;\r\n}\r\n\r\n.movie-detail-container {\r\n  position: relative;\r\n  padding-top: 40px;\r\n  //background-color: #eff1f5;\r\n  background-color: #f8f6f6;\r\n}\r\n\r\n.beautify-element {\r\n  position: fixed;\r\n  top: 0;\r\n  width: 100%;\r\n  text-align: center;\r\n  background-color: #f8f6f6;\r\n  padding: 10px 0;\r\n  box-shadow: 0 2px 5px rgb(203, 166, 166);\r\n  z-index: 1000;\r\n}\r\n\r\n.beautify-line {\r\n  width: 80%;\r\n  margin: 0 auto;\r\n  border: none;\r\n  border-top: 2px solid #b79292;\r\n}\r\n\r\n.beautify-text {\r\n  font-size: 30px;\r\n  font-weight: bold;\r\n  font-family: 'Technic';\r\n  overflow: hidden; /* 确保文字不会溢出 */\r\n  white-space: nowrap; /* 防止文字换行 */\r\n  border-right: .15em solid #b06767; /* 添加光标效果 */\r\n  max-width: 29ch;\r\n  animation: typing 3.5s steps(30, end), blink-caret .75s step-end infinite; /* 添加打字机和光标闪烁动画 */\r\n  text-align: center;\r\n  margin: 10px auto 20px;\r\n}\r\n\r\n@keyframes typing {\r\n  from { width: 0 }\r\n  to { width: 100% }\r\n}\r\n\r\n@keyframes blink-caret {\r\n  from, to { border-color: transparent }\r\n  50% { border-color: #b06767; }\r\n}\r\n\r\n.movie-detail {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin-top: 10px;\r\n  padding: 0 50px 200px;\r\n  background-color: #f8f6f6;\r\n}\r\n\r\n.top-section {\r\n  display: flex;\r\n  width: 100%;\r\n  align-items: flex-start;\r\n}\r\n\r\n.left-column,\r\n.middle-column,\r\n.right-column {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n}\r\n\r\n.middle-column {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  //border: 2px solid #ccc; /* 添加边框 */\r\n  //border-radius: 10px; /* 添加圆角 */\r\n  //padding: 10px; /* 添加内边距 */\r\n}\r\n\r\n.left-column {\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.right-column {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n  margin-right: 150px;\r\n  //border: 2px solid #ccc; /* 添加边框 */\r\n  //border-radius: 10px; /* 添加圆角 */\r\n  //padding: 10px; /* 添加内边距 */\r\n}\r\n\r\n.bottom-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  width: 83%;\r\n  margin-top: 20px;\r\n  //padding-left: 20px;\r\n  border: 2px solid #ccc; /* 添加边框 */\r\n  border-radius: 10px; /* 添加圆角 */\r\n  padding: 10px; /* 添加内边距 */\r\n}\r\n\r\n.movie-tags,\r\n.movie-languages,\r\n.movie-summary {\r\n  width: 100%; /* 确保这些行占满整个宽度 */\r\n  padding: 0; /* 移除默认的内边距 */\r\n  margin: 0 0 10px;\r\n  text-align: left;\r\n  letter-spacing: 0.1em;\r\n}\r\n\r\n.movie-tags::before,\r\n.movie-languages::before,\r\n.movie-summary::before {\r\n  font-weight: bold;\r\n}\r\n\r\n.movie-tags::before {\r\n  content: \"标签: \";\r\n}\r\n\r\n.movie-languages::before {\r\n  content: \"语言: \";\r\n}\r\n\r\n.movie-summary::before {\r\n  content: \"简介: \";\r\n}\r\n\r\n.movie-actors {\r\n  font-size: 16px;\r\n  margin-top: 10px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.movie-cover {\r\n  width: 200px;\r\n  height: 300px;\r\n  object-fit: cover;\r\n  border: 5px solid #ccc; /* 添加边框 */\r\n  border-radius: 10px; /* 添加圆角 */\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* 添加阴影 */\r\n}\r\n\r\n.movie-title {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.movie-director,\r\n.movie-duration,\r\n.movie-score-official,\r\n.movie-score-mine,\r\n.rating {\r\n  font-size: 16px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.movie-director::before,\r\n.movie-duration::before,\r\n.movie-actors::before {\r\n  font-weight: bold;\r\n}\r\n\r\n.movie-director::before {\r\n  content: \"导演: \";\r\n}\r\n\r\n.movie-duration::before {\r\n  content: \"时长: \";\r\n}\r\n\r\n.movie-actors::before {\r\n  content: \"演员: \";\r\n}\r\n\r\n.movie-score-official,\r\n.movie-title {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n}\r\n\r\n.movie-score-mine {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n}\r\n\r\n.comment-section {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center; /* Center the content horizontally */\r\n  width: 100%;\r\n  margin-top: 20px;\r\n  position: fixed; /* Fixed position */\r\n  bottom: 0; /* Fixed at the bottom of the page */\r\n  left: 0; /* Fixed at the left side of the page */\r\n  background-color: #f8f6f6; /* Background color */\r\n  padding: 10px; /* Padding */\r\n  box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1); /* Add shadow */\r\n}\r\n\r\n.comment-input {\r\n  flex: 1;\r\n  padding: 10px;\r\n  font-size: 16px;\r\n  text-align: center;\r\n  width: 80%;\r\n  border: 1px solid #f8f6f6;\r\n  border-radius: 5px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.watch-together-button{\r\n  padding: 10px 30px;\r\n  font-size: 16px;\r\n  background-color: #b79292;\r\n  color: white;\r\n  border: none;\r\n  margin-top: 10px;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n}\r\n.send-comment-button {\r\n  padding: 10px 20px;\r\n  font-size: 16px;\r\n  margin-left: 10px;\r\n  background-color: #b79292;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n}\r\n\r\n.watch-together-button:hover,\r\n.send-comment-button:hover {\r\n  background-color: #883333;\r\n}\r\n\r\n.star-rating {\r\n  display: flex;\r\n  cursor: pointer;\r\n}\r\n\r\n.star {\r\n  font-size: 24px;\r\n  color: #ccc;\r\n  margin-right: 5px;\r\n}\r\n\r\n.star.is-selected {\r\n  color: #f39c12;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}