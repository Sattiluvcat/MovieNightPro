{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"tags-search-container\"\n};\nvar _hoisted_2 = {\n  \"class\": \"tags-search-card\"\n};\nvar _hoisted_3 = {\n  \"class\": \"selection-section\"\n};\nvar _hoisted_4 = {\n  \"class\": \"category-container\"\n};\nvar _hoisted_5 = {\n  \"class\": \"tags-grid\"\n};\nvar _hoisted_6 = [\"onClick\"];\nvar _hoisted_7 = {\n  \"class\": \"language-container\"\n};\nvar _hoisted_8 = {\n  \"class\": \"tags-grid\"\n};\nvar _hoisted_9 = [\"onClick\"];\nvar _hoisted_10 = {\n  \"class\": \"action-container\"\n};\nvar _hoisted_11 = {\n  \"class\": \"selection-info\"\n};\nvar _hoisted_12 = {\n  key: 0\n};\nvar _hoisted_13 = {\n  key: 1\n};\nvar _hoisted_14 = {\n  key: 2\n};\nvar _hoisted_15 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[5] || (_cache[5] = _createElementVNode(\"h2\", {\n    \"class\": \"header-title\"\n  }, \"选择分类或语言\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_cache[1] || (_cache[1] = _createElementVNode(\"h3\", {\n    \"class\": \"section-title\"\n  }, [_createElementVNode(\"span\", {\n    \"class\": \"icon\"\n  }, \"🏷️\"), _createTextVNode(\" 分类标签 \")], -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_5, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.tags, function (tag) {\n    return _openBlock(), _createElementBlock(\"button\", {\n      key: tag,\n      onClick: function onClick($event) {\n        return $options.toggleTag(tag);\n      },\n      \"class\": _normalizeClass([{\n        selected: $data.selectedTags.includes(tag)\n      }, \"tag-button\"])\n    }, _toDisplayString(tag), 11 /* TEXT, CLASS, PROPS */, _hoisted_6);\n  }), 128 /* KEYED_FRAGMENT */))])]), _cache[3] || (_cache[3] = _createElementVNode(\"div\", {\n    \"class\": \"divider\"\n  }, null, -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_7, [_cache[2] || (_cache[2] = _createElementVNode(\"h3\", {\n    \"class\": \"section-title\"\n  }, [_createElementVNode(\"span\", {\n    \"class\": \"icon\"\n  }, \"🌐\"), _createTextVNode(\" 语言选择 \")], -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_8, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.languages, function (language) {\n    return _openBlock(), _createElementBlock(\"button\", {\n      key: language,\n      onClick: function onClick($event) {\n        return $options.toggleLanguage(language);\n      },\n      \"class\": _normalizeClass([{\n        selected: $data.selectedLanguages.includes(language)\n      }, \"tag-button\"])\n    }, _toDisplayString(language), 11 /* TEXT, CLASS, PROPS */, _hoisted_9);\n  }), 128 /* KEYED_FRAGMENT */))])])]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"p\", _hoisted_11, [_cache[4] || (_cache[4] = _createTextVNode(\" 已选择: \")), $data.selectedTags.length > 0 ? (_openBlock(), _createElementBlock(\"span\", _hoisted_12, _toDisplayString($data.selectedTags.join(', ')), 1 /* TEXT */)) : (_openBlock(), _createElementBlock(\"span\", _hoisted_13, \"未选择分类\")), $data.selectedLanguages.length > 0 ? (_openBlock(), _createElementBlock(\"span\", _hoisted_14, \" | \" + _toDisplayString($data.selectedLanguages.join(', ')), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = function () {\n      return $options.searchByTagsAndLanguages && $options.searchByTagsAndLanguages.apply($options, arguments);\n    }),\n    \"class\": \"search-button\",\n    disabled: $data.selectedTags.length === 0 && $data.selectedLanguages.length === 0\n  }, \" 开始搜索 \", 8 /* PROPS */, _hoisted_15)])])]);\n}","map":{"version":3,"names":["_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_Fragment","_renderList","$data","tags","tag","key","onClick","$event","$options","toggleTag","_normalizeClass","selected","selectedTags","includes","_hoisted_6","_hoisted_7","_hoisted_8","languages","language","toggleLanguage","selectedLanguages","_hoisted_9","_hoisted_10","_hoisted_11","length","_hoisted_12","_toDisplayString","join","_hoisted_13","_hoisted_14","_cache","searchByTagsAndLanguages","apply","arguments","disabled","_hoisted_15"],"sources":["/Users/lingl/Desktop/java_proj/movie_night/MovieNight/frontend/src/views/TagsSearchView.vue"],"sourcesContent":["<template>\r\n  <div class=\"tags-search-container\">\r\n    <div class=\"tags-search-card\">\r\n      <h2 class=\"header-title\">选择分类或语言</h2>\r\n      <div class=\"selection-section\">\r\n        <div class=\"category-container\">\r\n          <h3 class=\"section-title\">\r\n            <span class=\"icon\">🏷️</span>\r\n            分类标签\r\n          </h3>\r\n          <div class=\"tags-grid\">\r\n            <button\r\n                v-for=\"tag in tags\"\r\n                :key=\"tag\"\r\n                @click=\"toggleTag(tag)\"\r\n                :class=\"{ selected: selectedTags.includes(tag) }\"\r\n                class=\"tag-button\"\r\n            >\r\n              {{ tag }}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"divider\"></div>\r\n\r\n        <div class=\"language-container\">\r\n          <h3 class=\"section-title\">\r\n            <span class=\"icon\">🌐</span>\r\n            语言选择\r\n          </h3>\r\n          <div class=\"tags-grid\">\r\n            <button\r\n                v-for=\"language in languages\"\r\n                :key=\"language\"\r\n                @click=\"toggleLanguage(language)\"\r\n                :class=\"{ selected: selectedLanguages.includes(language) }\"\r\n                class=\"tag-button\"\r\n            >\r\n              {{ language }}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"action-container\">\r\n        <p class=\"selection-info\">\r\n          已选择:\r\n          <span v-if=\"selectedTags.length > 0\">{{ selectedTags.join(', ') }}</span>\r\n          <span v-else>未选择分类</span>\r\n          <span v-if=\"selectedLanguages.length > 0\"> | {{ selectedLanguages.join(', ') }}</span>\r\n        </p>\r\n        <button\r\n            @click=\"searchByTagsAndLanguages\"\r\n            class=\"search-button\"\r\n            :disabled=\"selectedTags.length === 0 && selectedLanguages.length === 0\"\r\n        >\r\n          开始搜索\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { searchByTags } from '@/services/api';\r\nimport {mapActions} from \"vuex\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      tags: ['剧情', '喜剧', '冒险', '动画', '奇幻', '爱情', '动作', '科幻', '家庭', '犯罪', '战争', '悬疑', '历史', '惊悚', '古装',\r\n        '传记', '歌舞', '纪录片', '音乐', '短片', '西部', '灾难', '武侠', '运动', '同性', '恐怖', '儿童', '情色'],\r\n      languages: ['英语', '汉语普通话', '日语', '法语', '西班牙语', '德语', '粤语', '俄语', '意大利语', '韩语', '印地语', '阿拉伯语',\r\n        '泰语', '拉丁语', '上海话', '瑞典语', '葡萄牙语', '波斯语', '辛达林语', '重庆话', '美国手语', '丹麦语', '荷兰语', '中国手语',\r\n        '土耳其语', '四川话', '山西话', '沪语', '挪威语', '唐山话', '手语', '克罗地亚语', '科萨语', '潮州话', '武汉话', '毛利语',\r\n        '芬兰语', '匈牙利语', '闽南语', '爱尔兰语', '苏格兰盖尔语', '多斯拉克语', '柏柏尔语', '日本手语', '意第绪语', '希腊语', '冰岛语',\r\n        '晋语', '南非荷兰语', '湖北话', '湖南话', '蒙古语', '捷克语', '爱沙尼亚语', '越南语', '武汉方言', '四川方言', '波尼语', '南京话',\r\n        '昆雅语', '古英语', '古代英语', '泰米尔语', '因纽特语', '塞尔维亚语', '斯瓦希里语', '祖鲁语', '山东方言', '夏威夷语', '乌尔都语',\r\n        '乌克兰语', '索马里语', '贵州方言', '印尼语', '阿姆哈拉语'],\r\n      selectedTags: [],\r\n      selectedLanguages: []\r\n    }\r\n  },\r\n  methods: {\r\n    toggleTag(tag) {\r\n      const index = this.selectedTags.indexOf(tag);\r\n      if (index > -1) {\r\n        this.selectedTags.splice(index, 1);\r\n      } else {\r\n        this.selectedTags.push(tag);\r\n      }\r\n    },\r\n    toggleLanguage(language) {\r\n      const index = this.selectedLanguages.indexOf(language);\r\n      if (index > -1) {\r\n        this.selectedLanguages.splice(index, 1);\r\n      } else {\r\n        this.selectedLanguages.push(language);\r\n      }\r\n    },\r\n    ...mapActions(['updateMovies']),\r\n    async searchByTagsAndLanguages() {\r\n      if (this.selectedTags.length === 0 && this.selectedLanguages.length === 0) {\r\n        alert('至少要选择一个标签噢');\r\n        return;\r\n      }\r\n      try {\r\n        const response = await searchByTags(this.selectedTags, this.selectedLanguages);\r\n        const movies = response.data.data;\r\n        this.updateMovies(movies);\r\n        this.$router.push({ name: 'SearchResults'});\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.tags-search-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 100vh;\r\n  background-color: white;\r\n  padding: 20px;\r\n}\r\n\r\n.tags-search-card {\r\n  width: 90%;\r\n  max-width: 1000px;\r\n  background-color: white;\r\n  border-radius: 15px;\r\n  box-shadow: 0 10px 30px rgba(183, 146, 146, 0.2);\r\n  padding: 30px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.tags-search-card:hover {\r\n  box-shadow: 0 15px 40px rgba(183, 146, 146, 0.3);\r\n}\r\n\r\n.header-title {\r\n  text-align: center;\r\n  color: #b06767;\r\n  font-size: 32px;\r\n  margin-bottom: 30px;\r\n  padding-bottom: 15px;\r\n  border-bottom: 2px dashed #e0e0e0;\r\n}\r\n\r\n.selection-section {\r\n  display: flex;\r\n  gap: 30px;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.category-container, .language-container {\r\n  flex: 1;\r\n}\r\n\r\n.section-title {\r\n  color: #b06767;\r\n  font-size: 22px;\r\n  margin-bottom: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.icon {\r\n  font-size: 24px;\r\n}\r\n\r\n.tags-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\r\n  gap: 12px;\r\n  max-height: 400px;\r\n  overflow-y: auto;\r\n  padding: 10px;\r\n  border-radius: 10px;\r\n  background-color: white;\r\n  border: 1px solid #f0e6e6;\r\n}\r\n\r\n.tag-button {\r\n  padding: 10px 15px;\r\n  font-size: 14px;\r\n  border: 1px solid #e0d0d0;\r\n  border-radius: 25px;\r\n  cursor: pointer;\r\n  background-color: #f9f0f0;\r\n  color: #555;\r\n  transition: all 0.2s ease;\r\n  text-align: center;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.tag-button:hover {\r\n  background-color: #fdf5f5;\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 3px 8px rgba(183, 146, 146, 0.2);\r\n}\r\n\r\n.tag-button.selected {\r\n  background-color: #b06767;\r\n  color: white;\r\n  border-color: #b06767;\r\n  font-weight: 600;\r\n}\r\n\r\n.divider {\r\n  width: 1px;\r\n  background-color: #f0e0e0;\r\n  margin: 0 10px;\r\n}\r\n\r\n.action-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin-top: 20px;\r\n  padding-top: 20px;\r\n  border-top: 1px dashed #e0e0e0;\r\n}\r\n\r\n.selection-info {\r\n  font-size: 16px;\r\n  color: #666;\r\n  margin-bottom: 20px;\r\n  padding: 12px 20px;\r\n  background-color: white;\r\n  border-radius: 8px;\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\n\r\n.selection-info span {\r\n  color: #b06767;\r\n  font-weight: 500;\r\n}\r\n\r\n.search-button {\r\n  padding: 15px 40px;\r\n  font-size: 18px;\r\n  background: linear-gradient(135deg, #b79292, #b06767);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 30px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  font-weight: 600;\r\n  letter-spacing: 1px;\r\n  box-shadow: 0 5px 15px rgba(176, 103, 103, 0.3);\r\n  margin-top: 10px;\r\n}\r\n\r\n.search-button:hover:not(:disabled) {\r\n  transform: translateY(-3px);\r\n  box-shadow: 0 8px 20px rgba(176, 103, 103, 0.4);\r\n  background: linear-gradient(135deg, #b06767, #883333);\r\n}\r\n\r\n.search-button:disabled {\r\n  background: linear-gradient(135deg, #cccccc, #aaaaaa);\r\n  cursor: not-allowed;\r\n  opacity: 0.7;\r\n}\r\n\r\n/* 滚动条样式 */\r\n.tags-grid::-webkit-scrollbar {\r\n  width: 8px;\r\n}\r\n\r\n.tags-grid::-webkit-scrollbar-track {\r\n  background: #f9f0f0;\r\n  border-radius: 4px;\r\n}\r\n\r\n.tags-grid::-webkit-scrollbar-thumb {\r\n  background-color: #d9c2c2;\r\n  border-radius: 4px;\r\n}\r\n\r\n.tags-grid::-webkit-scrollbar-thumb:hover {\r\n  background-color: #b06767;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .selection-section {\r\n    flex-direction: column;\r\n    gap: 20px;\r\n  }\r\n\r\n  .divider {\r\n    width: 100%;\r\n    height: 1px;\r\n    margin: 10px 0;\r\n  }\r\n\r\n  .tags-grid {\r\n    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));\r\n  }\r\n}\r\n</style>"],"mappings":";;;;;EACO,SAAM;AAAuB;;EAC3B,SAAM;AAAkB;;EAEtB,SAAM;AAAmB;;EACvB,SAAM;AAAoB;;EAKxB,SAAM;AAAW;;;EAenB,SAAM;AAAoB;;EAKxB,SAAM;AAAW;;;EAcrB,SAAM;AAAkB;;EACxB,SAAM;AAAgB;;;;;;;;;;;;uBA5C/BA,mBAAA,CA2DM,OA3DNC,UA2DM,GA1DJC,mBAAA,CAyDM,OAzDNC,UAyDM,G,0BAxDJD,mBAAA,CAAqC;IAAjC,SAAM;EAAc,GAAC,SAAO,qBAChCA,mBAAA,CAsCM,OAtCNE,UAsCM,GArCJF,mBAAA,CAgBM,OAhBNG,UAgBM,G,0BAfJH,mBAAA,CAGK;IAHD,SAAM;EAAe,IACvBA,mBAAA,CAA6B;IAAvB,SAAM;EAAM,GAAC,KAAG,G,iBAAO,QAE/B,E,qBACAA,mBAAA,CAUM,OAVNI,UAUM,I,kBATJN,mBAAA,CAQSO,SAAA,QAAAC,WAAA,CAPSC,KAAA,CAAAC,IAAI,YAAXC,GAAG;yBADdX,mBAAA,CAQS;MANJY,GAAG,EAAED,GAAG;MACRE,OAAK,WAALA,OAAKA,CAAAC,MAAA;QAAA,OAAEC,QAAA,CAAAC,SAAS,CAACL,GAAG;MAAA;MACpB,SAAKM,eAAA;QAAAC,QAAA,EAAcT,KAAA,CAAAU,YAAY,CAACC,QAAQ,CAACT,GAAG;MAAA,GACvC,YAAY;wBAEjBA,GAAG,gCAAAU,UAAA;gEAKZnB,mBAAA,CAA2B;IAAtB,SAAM;EAAS,4BAEpBA,mBAAA,CAgBM,OAhBNoB,UAgBM,G,0BAfJpB,mBAAA,CAGK;IAHD,SAAM;EAAe,IACvBA,mBAAA,CAA4B;IAAtB,SAAM;EAAM,GAAC,IAAE,G,iBAAO,QAE9B,E,qBACAA,mBAAA,CAUM,OAVNqB,UAUM,I,kBATJvB,mBAAA,CAQSO,SAAA,QAAAC,WAAA,CAPcC,KAAA,CAAAe,SAAS,YAArBC,QAAQ;yBADnBzB,mBAAA,CAQS;MANJY,GAAG,EAAEa,QAAQ;MACbZ,OAAK,WAALA,OAAKA,CAAAC,MAAA;QAAA,OAAEC,QAAA,CAAAW,cAAc,CAACD,QAAQ;MAAA;MAC9B,SAAKR,eAAA;QAAAC,QAAA,EAAcT,KAAA,CAAAkB,iBAAiB,CAACP,QAAQ,CAACK,QAAQ;MAAA,GACjD,YAAY;wBAEjBA,QAAQ,gCAAAG,UAAA;wCAMnB1B,mBAAA,CAcM,OAdN2B,WAcM,GAbJ3B,mBAAA,CAKI,KALJ4B,WAKI,G,2CALsB,QAExB,IAAYrB,KAAA,CAAAU,YAAY,CAACY,MAAM,Q,cAA/B/B,mBAAA,CAAyE,QAAAgC,WAAA,EAAAC,gBAAA,CAAjCxB,KAAA,CAAAU,YAAY,CAACe,IAAI,2B,cACzDlC,mBAAA,CAAyB,QAAAmC,WAAA,EAAZ,OAAK,IACN1B,KAAA,CAAAkB,iBAAiB,CAACI,MAAM,Q,cAApC/B,mBAAA,CAAsF,QAAAoC,WAAA,EAA5C,KAAG,GAAAH,gBAAA,CAAGxB,KAAA,CAAAkB,iBAAiB,CAACO,IAAI,0B,qCAExEhC,mBAAA,CAMS;IALJW,OAAK,EAAAwB,MAAA,QAAAA,MAAA;MAAA,OAAEtB,QAAA,CAAAuB,wBAAA,IAAAvB,QAAA,CAAAuB,wBAAA,CAAAC,KAAA,CAAAxB,QAAA,EAAAyB,SAAA,CAAwB;IAAA;IAChC,SAAM,eAAe;IACpBC,QAAQ,EAAEhC,KAAA,CAAAU,YAAY,CAACY,MAAM,UAAUtB,KAAA,CAAAkB,iBAAiB,CAACI,MAAM;KACnE,QAED,iBAAAW,WAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}