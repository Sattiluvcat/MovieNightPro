{"ast":null,"code":"import \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport axios from 'axios';\nimport router from \"@/router\";\naxios.defaults.withCredentials = true;\nvar API_URL = 'http://localhost:8081/user/movie';\n\n// 创建 axios 实例\nvar apiClient = axios.create({\n  baseURL: API_URL,\n  withCredentials: true,\n  headers: {\n    'Content-Type': 'application/json',\n    'X-Requested-With': 'XMLHttpRequest'\n  }\n});\n\n// 添加响应拦截器\napiClient.interceptors.response.use(function (response) {\n  // 正常响应直接返回\n  return response;\n}, function (error) {\n  if (error.response) {\n    switch (error.response.status) {\n      case 403:\n        // 跳转到登录页面\n        alert('没有权限访问该资源，请登录后重试噢');\n        router.push({\n          name: 'Login'\n        });\n        break;\n      case 401:\n        // 显示未授权提示\n        alert('登录已过期，请重新登录');\n        router.push({\n          name: 'Login'\n        });\n        break;\n      default:\n        console.error('请求错误:', error);\n    }\n  }\n  return Promise.reject(error);\n});\nexport var login = function login(contact, password) {\n  return apiClient.post(\"\".concat(API_URL, \"/login\"), {\n    contact: contact,\n    password: password\n  });\n};\nexport var register = function register(nickname, title, contact, password) {\n  return apiClient.post(\"\".concat(API_URL, \"/register\"), {\n    nickname: nickname,\n    title: title,\n    contact: contact,\n    password: password\n  });\n};\nexport var logout = function logout() {\n  return apiClient.post(\"\".concat(API_URL, \"/logout\"));\n};\nexport var searchMovies = function searchMovies(keyword) {\n  return apiClient.get(\"\".concat(API_URL, \"/search\"), {\n    params: {\n      keyword: keyword\n    }\n  });\n};\nexport var fuzzySearchMovies = function fuzzySearchMovies(keyword) {\n  return apiClient.get(\"\".concat(API_URL, \"/fuzzySearch\"), {\n    params: {\n      keyword: keyword\n    }\n  });\n};\nexport var getHomePage = function getHomePage() {\n  return apiClient.get(\"\".concat(API_URL, \"/home\"));\n};\nexport var searchByTags = function searchByTags(tags, languages) {\n  return apiClient.get(\"\".concat(API_URL, \"/categorySearch\"), {\n    params: {\n      tags: tags.join(','),\n      languages: languages.join(',')\n    }\n  });\n};\nexport var getMovieDetail = function getMovieDetail(_id) {\n  return apiClient.get(\"\".concat(API_URL, \"/\").concat(_id));\n};\nexport var watchTogether = function watchTogether(_id) {\n  return apiClient.post(\"\".concat(API_URL, \"/\").concat(_id, \"/watch-together\"));\n};\nexport var sendComment = function sendComment(_id, comment) {\n  return apiClient.post(\"\".concat(API_URL, \"/\").concat(_id, \"/comment\"), {\n    comment: comment\n  });\n};\nexport var rateMovie = function rateMovie(_id, rating) {\n  return apiClient.post(\"\".concat(API_URL, \"/\").concat(_id, \"/rate\"), {\n    rating: rating\n  });\n};\nexport var getSuggestedMovies = function getSuggestedMovies() {\n  return apiClient.get(\"\".concat(API_URL, \"/suggest\"));\n};\nexport var getAllMovies = function getAllMovies() {\n  return apiClient.get(\"\".concat(API_URL, \"/find-all\"));\n};","map":{"version":3,"names":["axios","router","defaults","withCredentials","API_URL","apiClient","create","baseURL","headers","interceptors","response","use","error","status","alert","push","name","console","Promise","reject","login","contact","password","post","concat","register","nickname","title","logout","searchMovies","keyword","get","params","fuzzySearchMovies","getHomePage","searchByTags","tags","languages","join","getMovieDetail","_id","watchTogether","sendComment","comment","rateMovie","rating","getSuggestedMovies","getAllMovies"],"sources":["/Users/lingl/Desktop/java_proj/movie_night/MovieNight/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\nimport router from \"@/router\";\r\naxios.defaults.withCredentials = true;\r\n\r\nconst API_URL = 'http://localhost:8081/user/movie';\r\n\r\n// 创建 axios 实例\r\nconst apiClient = axios.create({\r\n    baseURL: API_URL,\r\n    withCredentials: true,\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n        'X-Requested-With': 'XMLHttpRequest'\r\n    }\r\n});\r\n\r\n// 添加响应拦截器\r\napiClient.interceptors.response.use(\r\n    response => {\r\n        // 正常响应直接返回\r\n        return response;\r\n    },\r\n    error => {\r\n        if (error.response) {\r\n            switch (error.response.status) {\r\n                case 403:\r\n                    // 跳转到登录页面\r\n                    alert('没有权限访问该资源，请登录后重试噢');\r\n                    router.push({ name: 'Login' });\r\n                    break;\r\n                case 401:\r\n                    // 显示未授权提示\r\n                    alert('登录已过期，请重新登录');\r\n                    router.push({ name: 'Login' });\r\n                    break;\r\n                default:\r\n                    console.error('请求错误:', error);\r\n            }\r\n        }\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\nexport const login = (contact, password) => {\r\n    return apiClient.post(`${API_URL}/login`, { contact, password });\r\n}\r\n\r\nexport const register = (nickname, title, contact, password) => {\r\n    return apiClient.post(`${API_URL}/register`, { nickname, title, contact, password });\r\n}\r\n\r\nexport const logout = () => {\r\n    return apiClient.post(`${API_URL}/logout`);\r\n}\r\n\r\nexport const searchMovies = (keyword) => {\r\n    return apiClient.get(`${API_URL}/search`, { params: { keyword } });\r\n}\r\n\r\nexport const fuzzySearchMovies = (keyword) => {\r\n    return apiClient.get(`${API_URL}/fuzzySearch`, { params: { keyword } });\r\n}\r\n\r\nexport const getHomePage = () => {\r\n    return apiClient.get(`${API_URL}/home`);\r\n}\r\n\r\nexport const searchByTags = (tags, languages) => {\r\n    return apiClient.get(`${API_URL}/categorySearch`, {\r\n        params: {\r\n            tags: tags.join(','),\r\n            languages: languages.join(',')\r\n        }\r\n    });\r\n}\r\n\r\nexport const getMovieDetail = (_id) => {\r\n    return apiClient.get(`${API_URL}/${_id}`);\r\n}\r\n\r\nexport const watchTogether = (_id) => {\r\n    return apiClient.post(`${API_URL}/${_id}/watch-together`);\r\n}\r\n\r\nexport const sendComment = (_id, comment) => {\r\n    return apiClient.post(`${API_URL}/${_id}/comment`, { comment });\r\n}\r\n\r\nexport const rateMovie = (_id, rating) => {\r\n    return apiClient.post(`${API_URL}/${_id}/rate`, { rating });\r\n}\r\n\r\nexport const getSuggestedMovies = () => {\r\n    return apiClient.get(`${API_URL}/suggest`);\r\n}\r\n\r\nexport const getAllMovies = () => {\r\n    return apiClient.get(`${API_URL}/find-all`);\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}