(function(){"use strict";var e={4578:function(e,t,a){var s=a(5130),o=a(6768);function n(e,t){const a=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)(o.FK,null,[t[0]||(t[0]=(0,o.Lk)("nav",null,null,-1)),(0,o.bF)(a)],64)}var i=a(1241);const r={},l=(0,i.A)(r,[["render",n]]);var c=l,u=a(1387),d=a(4232);const h={class:"welcome-message"},g={class:"login"},v={class:"form-group"},m={class:"form-group"},p={class:"form-group"};function k(e,t,a,n,i,r){return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",h,[(0,o.Lk)("h1",null,(0,d.v_)(i.welcomeText),1)]),(0,o.Lk)("div",g,[t[11]||(t[11]=(0,o.Lk)("h2",null,"登入",-1)),(0,o.Lk)("form",{onSubmit:t[6]||(t[6]=(0,s.D$)(((...e)=>r.login&&r.login(...e)),["prevent"]))},[(0,o.Lk)("div",v,[t[8]||(t[8]=(0,o.Lk)("label",{for:"username"},"用户名：",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.username=e),onKeydown:t[1]||(t[1]=(...e)=>r.handleKeydown&&r.handleKeydown(...e)),required:""},null,544),[[s.Jo,i.username]])]),(0,o.Lk)("div",m,[t[9]||(t[9]=(0,o.Lk)("label",{for:"title"},"称呼：",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>i.title=e),onKeydown:t[3]||(t[3]=(...e)=>r.handleKeydown&&r.handleKeydown(...e)),required:""},null,544),[[s.Jo,i.title]])]),(0,o.Lk)("div",p,[t[10]||(t[10]=(0,o.Lk)("label",{for:"email"},"邮箱：",-1)),(0,o.bo)((0,o.Lk)("input",{type:"email","onUpdate:modelValue":t[4]||(t[4]=e=>i.email=e),onKeydown:t[5]||(t[5]=(...e)=>r.handleKeydown&&r.handleKeydown(...e)),required:""},null,544),[[s.Jo,i.email]])])],32),(0,o.Lk)("button",{class:"submit-button",onClick:t[7]||(t[7]=(...e)=>r.login&&r.login(...e))},"进入主页")])],64)}a(4114);var f=a(4373),y={data(){return{username:"",title:"",email:"",welcomeText:"Enjoy your movie night!"}},methods:{async login(){if(this.username&&this.title&&this.email)try{const e=await f.A.post("http://localhost:8080/user/movie/login",{nickname:this.username,title:this.title,contact:this.email});1===e.data.code?this.$router.push({name:"Home"}):alert("登录失败: "+e.data.msg)}catch(e){console.error(e),alert("出错了！请重试~")}else alert("所有信息都必须填写噢~")},handleKeydown(e){"Enter"===e.key&&this.login()}}};const L=(0,i.A)(y,[["render",k],["__scopeId","data-v-b0994644"]]);var _=L;const b={class:"home"},w={class:"search-container"},C={class:"category-search-container"},P={class:"movie-overview-container"},T=["onClick"],K={class:"movie-header"},M={class:"movie-title"},E={class:"movie-score"},S={class:"movie-details"},A={class:"left-column"},X={class:"movie-actors"},j={class:"movie-tags"},x={class:"movie-languages"},$={class:"right-column"},O={class:"movie-release"};function R(e,t,a,n,i,r){return(0,o.uX)(),(0,o.CE)("div",b,[t[5]||(t[5]=(0,o.Lk)("div",{class:"typing-effect"},[(0,o.Lk)("p",{class:"typing-text"},"Select one for movie night")],-1)),(0,o.Lk)("div",w,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.searchKeyword=e),onKeydown:t[1]||(t[1]=(...e)=>r.handleKeydown&&r.handleKeydown(...e)),placeholder:"输入电影名 / 导演 / 演员",class:"search-box"},null,544),[[s.Jo,i.searchKeyword]]),(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.searchByKeyword&&r.searchByKeyword(...e)),class:"search-button"},"搜索😘")]),(0,o.Lk)("div",C,[(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>r.fetchAllMovies&&r.fetchAllMovies(...e)),class:"view-all-button"},"查看全部电影😎"),(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>r.goToTagsSearch&&r.goToTagsSearch(...e)),class:"category-search-button"},"通过标签搜索😎")]),t[6]||(t[6]=(0,o.Lk)("div",{class:"recommendation-header"},[(0,o.Lk)("p",{class:"header-text"},"电影推荐"),(0,o.Lk)("hr",{class:"header-line"})],-1)),(0,o.Lk)("div",P,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.movies,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e._id,class:"movie-item",onClick:t=>r.goToMovieDetail(e._id)},[(0,o.Lk)("div",K,[(0,o.Lk)("h2",M,(0,d.v_)(e.title),1),(0,o.Lk)("p",E,"评分: "+(0,d.v_)(e.star_mine)+" / 5",1)]),(0,o.Lk)("div",S,[(0,o.Lk)("div",A,[(0,o.Lk)("p",X,"演员: "+(0,d.v_)(e.actor_actresses.join(", ")),1),(0,o.Lk)("p",j,"标签: "+(0,d.v_)(e.tags.join(", ")),1),(0,o.Lk)("p",x,"语言: "+(0,d.v_)(e.languages.join(", ")),1)]),(0,o.Lk)("div",$,[(0,o.Lk)("p",O,"上映时间: "+(0,d.v_)(e.release_time),1)])])],8,T)))),128))])])}f.A.defaults.withCredentials=!0;const F="http://localhost:8080/user/movie",I=e=>f.A.get(`${F}/search`,{params:{keyword:e}}),D=(e,t)=>f.A.get(`${F}/categorySearch`,{params:{tags:e.join(","),languages:t.join(",")}}),B=e=>f.A.get(`${F}/${e}`),U=e=>f.A.post(`${F}/${e}/watch-together`),J=(e,t)=>f.A.post(`${F}/${e}/comment`,{comment:t}),V=()=>f.A.get(`${F}/suggest`),q=()=>f.A.get(`${F}/find-all`);var H=a(782),W={data(){return{searchKeyword:"",movies:[]}},methods:{...(0,H.i0)(["updateMovies"]),async searchByKeyword(){if(this.searchKeyword)try{const e=await I(this.searchKeyword),t=e.data.data;this.updateMovies(t),this.$router.push({name:"SearchResults"})}catch(e){console.error(e)}else alert("请输入搜索关键词")},async fetchAllMovies(){try{const e=await q();console.log(e);const t=e.data.data;this.updateMovies(t),this.$router.push({name:"SearchResults"})}catch(e){console.error(e)}},goToTagsSearch(){this.$router.push({name:"TagsSearch"})},async fetchSuggestedMovies(){try{const e=await V();this.movies=e.data.data}catch(e){console.error(e)}},goToMovieDetail(e){this.$router.push({name:"MovieDetail",params:{_id:e}})},handleKeydown(e){"Enter"===e.key&&this.searchByKeyword()}},created(){this.fetchSuggestedMovies()}};const z=(0,i.A)(W,[["render",R],["__scopeId","data-v-192e02e3"]]);var G=z;const N={class:"tags-search"},Q={class:"tags-container"},Y=["onClick"],Z={class:"languages-container"},ee=["onClick"];function te(e,t,a,s,n,i){return(0,o.uX)(),(0,o.CE)("div",N,[t[3]||(t[3]=(0,o.Lk)("h2",null,"选择分类或语言",-1)),(0,o.Lk)("div",Q,[t[1]||(t[1]=(0,o.Lk)("label",null,"分类",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.tags,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.toggleTag(e),class:(0,d.C4)({selected:n.selectedTags.includes(e)})},(0,d.v_)(e),11,Y)))),128))]),t[4]||(t[4]=(0,o.Lk)("hr",{class:"divider"},null,-1)),(0,o.Lk)("div",Z,[t[2]||(t[2]=(0,o.Lk)("label",null,"语言",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.languages,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.toggleLanguage(e),class:(0,d.C4)({selected:n.selectedLanguages.includes(e)})},(0,d.v_)(e),11,ee)))),128))]),(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.searchByTagsAndLanguages&&i.searchByTagsAndLanguages(...e)),class:"search-button"},"搜索")])}var ae={data(){return{tags:["剧情","喜剧","冒险","动画","奇幻","爱情","动作","科幻","家庭","犯罪","战争","悬疑","历史","惊悚","古装","传记","歌舞","纪录片","音乐","短片","西部","灾难","武侠","运动","同性","恐怖","儿童","情色"],languages:["英语","汉语普通话","日语","法语","西班牙语","德语","粤语","俄语","意大利语","韩语","印地语","阿拉伯语","泰语","拉丁语","上海话","瑞典语","葡萄牙语","波斯语","辛达林语","重庆话","美国手语","丹麦语","荷兰语","中国手语","土耳其语","四川话","山西话","沪语","挪威语","唐山话","手语","克罗地亚语","科萨语","潮州话","武汉话","毛利语","芬兰语","匈牙利语","闽南语","爱尔兰语","苏格兰盖尔语","多斯拉克语","柏柏尔语","日本手语","意第绪语","希腊语","冰岛语","晋语","南非荷兰语","湖北话","湖南话","蒙古语","捷克语","爱沙尼亚语","越南语","武汉方言","四川方言","波尼语","南京话","昆雅语","古英语","古代英语","泰米尔语","因纽特语","塞尔维亚语","斯瓦希里语","祖鲁语","山东方言","夏威夷语","乌尔都语","乌克兰语","索马里语","贵州方言","印尼语","阿姆哈拉语"],selectedTags:[],selectedLanguages:[]}},methods:{toggleTag(e){const t=this.selectedTags.indexOf(e);t>-1?this.selectedTags.splice(t,1):this.selectedTags.push(e)},toggleLanguage(e){const t=this.selectedLanguages.indexOf(e);t>-1?this.selectedLanguages.splice(t,1):this.selectedLanguages.push(e)},...(0,H.i0)(["updateMovies"]),async searchByTagsAndLanguages(){if(0!==this.selectedTags.length||0!==this.selectedLanguages.length)try{const e=await D(this.selectedTags,this.selectedLanguages),t=e.data.data;this.updateMovies(t),this.$router.push({name:"SearchResults"})}catch(e){console.error(e)}else alert("至少要选择一个标签噢")}}};const se=(0,i.A)(ae,[["render",te],["__scopeId","data-v-f159b27c"]]);var oe=se;const ne={class:"search-results"},ie={key:0},re={class:"results-info"},le=["onClick"],ce={class:"movie-header"},ue={class:"movie-title"},de={class:"movie-score"},he={class:"movie-details"},ge={class:"left-column"},ve={class:"movie-actors"},me={class:"movie-tags"},pe={class:"movie-languages"},ke={class:"right-column"},fe={class:"movie-release"},ye={key:1},Le={class:"pagination"},_e=["disabled"],be=["onClick"],we={key:1},Ce=["disabled"];function Pe(e,t,a,s,n,i){return(0,o.uX)(),(0,o.CE)("div",ne,[t[2]||(t[2]=(0,o.Lk)("p",{class:"header-message"},"这里是所有搜索结果😁",-1)),i.movies&&i.movies.length>0?((0,o.uX)(),(0,o.CE)("div",ie,[(0,o.Lk)("p",re,"本页为第 "+(0,d.v_)(0===i.movies.length?0:10*(n.currentPage-1)+1)+" - "+(0,d.v_)(0===i.movies.length?0:10*(n.currentPage-1)+i.paginatedMovies.length)+" 条记录，共找到 "+(0,d.v_)(i.movies.length)+" 条记录😁",1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.paginatedMovies,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e._id,class:"movie-item",onClick:t=>i.goToMovieDetail(e._id)},[(0,o.Lk)("div",ce,[(0,o.Lk)("h2",ue,(0,d.v_)(e.title),1),(0,o.Lk)("p",de,"评分: "+(0,d.v_)(e.star_mine)+" / 5",1)]),(0,o.Lk)("div",he,[(0,o.Lk)("div",ge,[(0,o.Lk)("p",ve,"演员: "+(0,d.v_)(e.actor_actresses.join(", ")),1),(0,o.Lk)("p",me,"标签: "+(0,d.v_)(e.tags.join(", ")),1),(0,o.Lk)("p",pe,"语言: "+(0,d.v_)(e.languages.join(", ")),1)]),(0,o.Lk)("div",ke,[(0,o.Lk)("p",fe,"上映时间: "+(0,d.v_)(e.release_time),1)])])],8,le)))),128))])):((0,o.uX)(),(0,o.CE)("div",ye," 没有相关电影噢，请重试😢 ")),(0,o.Lk)("div",Le,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.prevPage&&i.prevPage(...e)),disabled:1===n.currentPage},"上一页",8,_e),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.paginationPages,(e=>((0,o.uX)(),(0,o.CE)("span",{key:e},["..."!==e?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t=>i.goToPage(e),class:(0,d.C4)({active:n.currentPage===e})},(0,d.v_)(e),11,be)):((0,o.uX)(),(0,o.CE)("span",we,"..."))])))),128)),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.nextPage&&i.nextPage(...e)),disabled:n.currentPage===i.totalPages},"下一页",8,Ce)])])}var Te={data(){return{currentPage:1,itemsPerPage:10}},computed:{...(0,H.L8)(["getMovies"]),movies(){return this.getMovies},totalPages(){return Math.ceil(this.movies.length/this.itemsPerPage)},paginatedMovies(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.movies.slice(e,t)},paginationPages(){const e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{this.currentPage>3&&(e.push(1),e.push("..."));for(let t=Math.max(1,this.currentPage-2);t<=Math.min(this.totalPages,this.currentPage+2);t++)e.push(t);this.currentPage<this.totalPages-2&&(e.push("..."),e.push(this.totalPages))}return e}},methods:{goToMovieDetail(e){this.$router.push({name:"MovieDetail",params:{_id:e}})},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},prevPage(){this.currentPage>1&&this.currentPage--},goToPage(e){"..."!==e&&(this.currentPage=e)}}};const Ke=(0,i.A)(Te,[["render",Pe],["__scopeId","data-v-570c93e0"]]);var Me=Ke;const Ee={class:"movie-detail-container"},Se={key:0,class:"movie-detail"},Ae={class:"top-section"},Xe={class:"left-column"},je=["src"],xe={class:"middle-column"},$e={class:"movie-title"},Oe={class:"movie-director"},Re={class:"movie-duration"},Fe={class:"movie-actors"},Ie={class:"right-column"},De={class:"movie-score-official"},Be={class:"movie-score-mine"},Ue={class:"user-rating"},Je={class:"bottom-section"},Ve={class:"movie-tags"},qe={class:"movie-languages"},He={class:"movie-summary preserve-whitespace"},We={class:"comment-section"},ze={key:1};function Ge(e,t,a,n,i,r){const l=(0,o.g2)("star-rating");return(0,o.uX)(),(0,o.CE)("div",Ee,[t[5]||(t[5]=(0,o.Lk)("div",{class:"beautify-element"},[(0,o.Lk)("hr",{class:"beautify-line"}),(0,o.Lk)("p",{class:"beautify-text"},"Welcome to the Movie Detail Page!🤩"),(0,o.Lk)("hr",{class:"beautify-line"})],-1)),i.movie?((0,o.uX)(),(0,o.CE)("div",Se,[(0,o.Lk)("div",Ae,[(0,o.Lk)("div",Xe,[(0,o.Lk)("img",{referrerpolicy:"no-referrer",src:i.cover_url,alt:"Movie Cover",class:"movie-cover"},null,8,je)]),(0,o.Lk)("div",xe,[(0,o.Lk)("h1",$e,(0,d.v_)(i.movie.title),1),(0,o.Lk)("p",Oe,(0,d.v_)(i.movie.director),1),(0,o.Lk)("p",Re,(0,d.v_)(i.movie.duration),1),(0,o.Lk)("p",Fe,(0,d.v_)(i.movie.actor_actresses.join(", ")),1)]),(0,o.Lk)("div",Ie,[(0,o.Lk)("p",De,"豆瓣评分: "+(0,d.v_)(i.score_official),1),(0,o.Lk)("p",Be,"我的评分: "+(0,d.v_)(i.movie.star_mine)+" / 5",1),(0,o.Lk)("div",Ue,[t[4]||(t[4]=(0,o.Lk)("span",null,"用户评分: ",-1)),(0,o.bF)(l,{rating:i.userRating,onRatingSelected:r.setUserRating},null,8,["rating","onRatingSelected"])]),(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.watchTogether&&r.watchTogether(...e)),class:"watch-together-button"},"一起看")])]),(0,o.Lk)("div",Je,[(0,o.Lk)("p",Ve,(0,d.v_)(i.movie.tags.join(", ")),1),(0,o.Lk)("p",qe,(0,d.v_)(i.movie.languages.join(", ")),1),(0,o.Lk)("p",He,(0,d.v_)(i.summary),1),(0,o.Lk)("div",We,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.comment=e),onKeydown:t[2]||(t[2]=(...e)=>r.handleKeydown&&r.handleKeydown(...e)),placeholder:"看过了？请跟Satti分享评论😸（按下Enter就会发送噢）",class:"comment-input"},null,544),[[s.Jo,i.comment]]),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>r.sendComment&&r.sendComment(...e)),class:"send-comment-button"},"发送评论")])])])):((0,o.uX)(),(0,o.CE)("div",ze," 加载中 请稍候😣 "))])}var Ne={props:["_id"],data(){return{movie:null,cover_url:"",score_official:"",summary:"",comment:"",userRating:0}},async created(){try{const e=await B(this._id);e&&e.data&&(this.movie=e.data.data.movie,this.cover_url=e.data.data.cover_url,this.score_official=e.data.data.score_official,this.summary=e.data.data.summary)}catch(e){console.error("抓取电影内容时出错了:",e)}},methods:{async watchTogether(){try{const e=await U(this._id);console.log("一起看 响应:",e),0===e.data.code?alert("请登录后再发送噢"):alert("已向Satti发送一起看邀请")}catch(e){console.error("一起看功能出错了:",e)}},async sendComment(){try{const e=await J(this._id,this.comment);console.log("发送评论 响应:",e),"0"===e.data.code?alert("请登录后再发送噢"):alert("已向Satti发送电影评论"),this.comment=""}catch(e){console.error("发送评论功能出错了:",e)}},handleKeydown(e){"Enter"===e.key&&this.sendComment()},setUserRating(e){this.userRating=e}}};const Qe=(0,i.A)(Ne,[["render",Ge],["__scopeId","data-v-7216cad2"]]);var Ye=Qe;const Ze=[{path:"/",name:"Login",component:_},{path:"/home",name:"Home",component:G},{path:"/tags-search",name:"TagsSearch",component:oe},{path:"/search-results",name:"SearchResults",component:Me,props:e=>({movies:e.params.movies})},{path:"/movie/:_id",name:"MovieDetail",component:Ye,props:!0}],et=(0,u.aE)({history:(0,u.LA)("/"),routes:Ze});var tt=et,at=(0,H.y$)({state:{movies:[]},mutations:{setMovies(e,t){e.movies=t}},actions:{updateMovies({commit:e},t){e("setMovies",t)}},getters:{getMovies:e=>e.movies}});(0,s.Ef)(c).use(at).use(tt).mount("#app")}},t={};function a(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,s,o,n){if(!s){var i=1/0;for(u=0;u<e.length;u++){s=e[u][0],o=e[u][1],n=e[u][2];for(var r=!0,l=0;l<s.length;l++)(!1&n||i>=n)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(r=!1,n<i&&(i=n));if(r){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[s,o,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,n,i=s[0],r=s[1],l=s[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(l)var u=l(a)}for(t&&t(s);c<i.length;c++)n=i[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},s=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(4578)}));s=a.O(s)})();
//# sourceMappingURL=app.be7f2686.js.map